(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{OzzM:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),o=e("mrSG"),i=e("H+bZ"),u=e("ZZ/e"),r=e("t/Na"),a=e("AytR"),c=e("gcOT"),d=function(){function n(n,l,e,t,o){this.api=n,this.nav=l,this.route=e,this.toastController=t,this.sanitizer=o,this.empty=!1,this.items=[],this.title="",this.apiKey=null,this.photos=null,this.url=a.a}return n.prototype.takePicture=function(){return o.__awaiter(this,void 0,void 0,function(){var n;return o.__generator(this,function(l){switch(l.label){case 0:return[4,c.c.Camera.getPhoto({quality:100,allowEditing:!1,resultType:c.a.DataUrl,source:c.b.Camera})];case 1:return n=l.sent(),null==this.photos&&(this.photos=[]),this.upload(n.dataUrl),[2]}})})},n.prototype.upload=function(n){var l=this;this.api._post("portfoliouploadfiles",{file:n,id:this.route.snapshot.paramMap.get("id").toString()},new r.g({"X-PI-KEY":this.apiKey})).toPromise().then(function(n){l.items.push(n.result),l.presentToast("\u0424\u0430\u0439\u043b \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e")}).catch(function(n){})},n.prototype.ngOnInit=function(){var n=this;this.api.apiKey.subscribe(function(l){return n.apiKey=l})},n.prototype.ngOnDestroy=function(){},n.prototype.ionViewWillEnter=function(){var n=this;null!==this.apiKey&&this.api._get("portfolioget",(new r.h).set("id",this.route.snapshot.paramMap.get("id").toString()),new r.g({"X-PI-KEY":this.apiKey})).toPromise().then(function(l){for(var e in n.title=l.result.name,l.result.files)n.items.push(l.result.files[e]);n.items.length||(n.empty=!0)}).catch(function(n){})},n.prototype.ionViewWillLeave=function(){this.items=[]},n.prototype.presentToast=function(n){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(l){switch(l.label){case 0:return[4,this.toastController.create({message:n,duration:2e3})];case 1:return l.sent().present(),[2]}})})},n.prototype.delete=function(n){var l=this,e=[];for(var t in this.items)this.items[t].id!==n&&e.push(this.items[t]);this.items=e,this.items.length||(this.empty=!0),null!==this.apiKey&&this.api._get("portfolioremovefile",(new r.h).set("id",this.route.snapshot.paramMap.get("id").toString()).set("fileId",n.toString()),new r.g({"X-PI-KEY":this.apiKey})).toPromise().then(function(n){l.presentToast(n.errorCode?"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430":"\u0424\u0430\u0439\u043b \u0443\u0434\u0430\u043b\u0451\u043d \u0438\u0437 \u043f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e")}).catch(function(n){l.presentToast("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430")})},n.prototype.changeDescription=function(n){var l=this,e=document.getElementById("description"+n).value;this.api._post("portfoliochangefiledescription",{id:parseInt(this.route.snapshot.paramMap.get("id")),fileId:n,description:e},new r.g({"X-PI-KEY":this.apiKey})).toPromise().then(function(n){l.presentToast(n.errorCode?"\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e")}).catch(function(n){l.presentToast("\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430")})},n}(),s=function(){return function(){}}(),p=e("pMnS"),f=e("oBZk"),m=e("gIcY"),h=e("Ip0R"),g=e("ZYCi"),b=e("ZYjt"),v=t["\u0275crt"]({encapsulation:0,styles:[["ion-thumbnail[_ngcontent-%COMP%]{--border-radius:.2rem}.item-delete[_ngcontent-%COMP%]{color:#fff;background-color:#c24227}.item-form[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex}.item-form__input[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}.item-form[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{right:0;width:3rem;height:100%}.empty[_ngcontent-%COMP%]{padding:1rem}.empty-text[_ngcontent-%COMP%]{background-color:#f5f5f5;text-align:center;padding:1rem}.add[_ngcontent-%COMP%]{padding:1rem}"]],data:{}});function C(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","empty"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"div",[["class","empty-text"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["\u041d\u0435\u0442 \u0444\u0430\u0439\u043b\u043e\u0432"]))],null,null)}function R(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,25,"div",[["class","item"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,24,"ion-item-sliding",[],null,null,null,f.eb,f.u)),t["\u0275did"](2,49152,null,0,u.L,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](3,0,null,0,18,"ion-item",[],null,null,null,f.fb,f.s)),t["\u0275did"](4,49152,null,0,u.G,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](5,0,null,0,3,"ion-thumbnail",[["slot","start"]],null,null,null,f.tb,f.I)),t["\u0275did"](6,49152,null,0,u.xb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](7,0,null,0,1,"ion-img",[],null,null,null,f.Z,f.o)),t["\u0275did"](8,49152,null,0,u.C,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{src:[0,"src"]},null),(n()(),t["\u0275eld"](9,0,null,0,12,"div",[["class","item-form"]],null,null,null,null,null)),(n()(),t["\u0275eld"](10,0,null,null,7,"div",[["class","item-form__input"]],null,null,null,null,null)),(n()(),t["\u0275eld"](11,0,null,null,2,"ion-label",[["position","floating"]],null,null,null,f.gb,f.v)),t["\u0275did"](12,49152,null,0,u.M,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{position:[0,"position"]},null),(n()(),t["\u0275ted"](-1,0,["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"])),(n()(),t["\u0275eld"](14,0,null,null,3,"ion-input",[["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430"],["type","text"]],[[8,"id",0]],[[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0;return"ionBlur"===l&&(o=!1!==t["\u0275nov"](n,17)._handleBlurEvent(e.target)&&o),"ionChange"===l&&(o=!1!==t["\u0275nov"](n,17)._handleInputEvent(e.target)&&o),o},f.cb,f.r)),t["\u0275prd"](5120,null,m.j,function(n){return[n]},[u.Mb]),t["\u0275did"](16,49152,null,0,u.F,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{placeholder:[0,"placeholder"],type:[1,"type"],value:[2,"value"]},null),t["\u0275did"](17,16384,null,0,u.Mb,[t.ElementRef],null,null),(n()(),t["\u0275eld"](18,0,null,null,3,"ion-button",[],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.changeDescription(n.context.$implicit.id)&&t),t},f.P,f.e)),t["\u0275did"](19,49152,null,0,u.j,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](20,0,null,0,1,"ion-icon",[["color","light"],["name","checkmark"]],null,null,null,f.Y,f.n)),t["\u0275did"](21,49152,null,0,u.B,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],name:[1,"name"]},null),(n()(),t["\u0275eld"](22,0,null,0,3,"ion-item-options",[["side","end"]],null,null,null,f.db,f.t)),t["\u0275did"](23,49152,null,0,u.K,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{side:[0,"side"]},null),(n()(),t["\u0275eld"](24,0,null,0,1,"button",[["class","item-delete"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.delete(n.context.$implicit.id)&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]))],function(n,l){n(l,8,0,t["\u0275inlineInterpolate"](2,"",l.component.url,"",l.context.$implicit.path,"")),n(l,12,0,"floating"),n(l,16,0,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430","text",t["\u0275inlineInterpolate"](1,"",l.context.$implicit.description,"")),n(l,21,0,"light","checkmark"),n(l,23,0,"end")},function(n,l){n(l,14,0,t["\u0275inlineInterpolate"](1,"description",l.context.$implicit.id,""))})}function y(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,11,"ion-header",[],null,null,null,f.X,f.m)),t["\u0275did"](1,49152,null,0,u.A,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](2,0,null,0,9,"ion-toolbar",[],null,null,null,f.vb,f.K)),t["\u0275did"](3,49152,null,0,u.Ab,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](4,0,null,0,2,"ion-title",[],null,null,null,f.ub,f.J)),t["\u0275did"](5,49152,null,0,u.yb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](6,0,["",""])),(n()(),t["\u0275eld"](7,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,f.Q,f.f)),t["\u0275did"](8,49152,null,0,u.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](9,0,null,0,2,"ion-back-button",[["color","dark"],["defaultHref","/private/portfolio"],["text",""]],null,[[null,"click"]],function(n,l,e){var o=!0;return"click"===l&&(o=!1!==t["\u0275nov"](n,11).onClick(e)&&o),o},f.N,f.c)),t["\u0275did"](10,49152,null,0,u.f,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],defaultHref:[1,"defaultHref"],text:[2,"text"]},null),t["\u0275did"](11,16384,null,0,u.g,[[2,u.gb],u.Gb],{defaultHref:[0,"defaultHref"]},null),(n()(),t["\u0275eld"](12,0,null,null,13,"ion-content",[],null,null,null,f.S,f.h)),t["\u0275did"](13,49152,null,0,u.t,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275and"](16777216,null,0,1,null,C)),t["\u0275did"](15,16384,null,0,h.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](16,0,null,0,5,"div",[["class","add"]],null,null,null,null,null)),(n()(),t["\u0275eld"](17,0,null,null,4,"ion-button",[["expand","block"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.takePicture()&&t),t},f.P,f.e)),t["\u0275did"](18,49152,null,0,u.j,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{expand:[0,"expand"]},null),(n()(),t["\u0275eld"](19,0,null,0,1,"ion-icon",[["name","camera"]],null,null,null,f.Y,f.n)),t["\u0275did"](20,49152,null,0,u.B,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(n()(),t["\u0275ted"](-1,0,[" \u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u043d\u0438\u043c\u043e\u043a "])),(n()(),t["\u0275eld"](22,0,null,0,3,"ion-list",[["inset","true"]],null,null,null,f.hb,f.w)),t["\u0275did"](23,49152,null,0,u.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{inset:[0,"inset"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,R)),t["\u0275did"](25,278528,null,0,h.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var e=l.component;n(l,10,0,"dark","/private/portfolio",""),n(l,11,0,"/private/portfolio"),n(l,15,0,e.empty),n(l,18,0,"block"),n(l,20,0,"camera"),n(l,23,0,"true"),n(l,25,0,e.items)},function(n,l){n(l,6,0,l.component.title)})}function _(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-detail",[],null,null,null,y,v)),t["\u0275did"](1,245760,null,0,d,[i.a,u.Gb,g.a,u.Nb,b.DomSanitizer],null,null)],function(n,l){n(l,1,0)},null)}var k=t["\u0275ccf"]("app-detail",d,_,{},{},[]);e.d(l,"DetailPageModuleNgFactory",function(){return E});var E=t["\u0275cmf"](s,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[p.a,k]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,h.NgLocalization,h.NgLocaleLocalization,[t.LOCALE_ID,[2,h["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,m.s,m.s,[]),t["\u0275mpd"](4608,u.a,u.a,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,u.Fb,u.Fb,[u.a,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](4608,u.Jb,u.Jb,[u.a,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](1073742336,h.CommonModule,h.CommonModule,[]),t["\u0275mpd"](1073742336,m.r,m.r,[]),t["\u0275mpd"](1073742336,m.g,m.g,[]),t["\u0275mpd"](1073742336,u.Cb,u.Cb,[]),t["\u0275mpd"](1073742336,g.n,g.n,[[2,g.s],[2,g.m]]),t["\u0275mpd"](1073742336,s,s,[]),t["\u0275mpd"](1024,g.k,function(){return[[{path:"",component:d}]]},[])])})}}]);