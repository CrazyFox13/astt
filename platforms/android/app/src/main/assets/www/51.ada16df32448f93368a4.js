(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{x680:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),o=e("mrSG"),u=e("ZZ/e"),a=e("H+bZ"),r=e("t/Na"),i=e("gIcY"),d=function(){function n(n,l,e,t,o){this.route=n,this.nav=l,this.api=e,this.formBuilder=t,this.toastController=o,this.taskId=0,this.taskCode="",this.iBlockId=0,this.categoryCode="",this.categoryType="",this.title="\u041d\u043e\u0432\u044b\u0439 \u043e\u0442\u043a\u043b\u0438\u043a \u043d\u0430 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 #",this.disabled=!1,this.apiKey=null,this.offerForm=new i.e({text:new i.c("",i.q.compose([i.q.minLength(1),i.q.required])),taskId:new i.c("",i.q.compose([i.q.required,i.q.min(1)])),categoryId:new i.c("",i.q.compose([i.q.required,i.q.min(1)]))})}return n.prototype.ngOnInit=function(){var n=this;this.api.apiKey.subscribe(function(l){return n.apiKey=l})},n.prototype.ionViewWillEnter=function(){var n=this;null!==this.apiKey&&(this.taskId=parseInt(this.route.snapshot.paramMap.get("id")),this.iBlockId=parseInt(this.route.snapshot.paramMap.get("iBlockId")),this.categoryType=this.route.snapshot.paramMap.get("categoryType"),this.categoryCode=this.route.snapshot.paramMap.get("categoryCode"),this.taskCode=this.route.snapshot.paramMap.get("taskCode"),this.api._get("offercost",(new r.h).set("categoryType",this.categoryType).set("categoryId",this.iBlockId.toString()).set("taskId",this.taskId.toString()),new r.g({"X-PI-KEY":this.apiKey})).toPromise().then(function(l){l.errorCode?n.nav.navigateRoot("/public/home"):null!==l.result.offer&&n.nav.navigateRoot("/public/home")}).catch(function(l){n.nav.navigateRoot("/public/home")}))},n.prototype.presentToast=function(n){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(l){switch(l.label){case 0:return[4,this.toastController.create({message:n,duration:2e3,position:"top"})];case 1:return l.sent().present(),[2]}})})},n.prototype.submit=function(n,l,e,t,o){var u=this;this.disabled=!0,null!==this.apiKey&&this.api._post("createoffer",{text:n.value.text,taskId:n.value.taskId,categoryId:n.value.categoryId,categoryType:e},new r.g({"X-PI-KEY":this.apiKey})).toPromise().then(function(n){n.errorCode?u.nav.navigateForward("/public/tasks/"+l+"/"+e+"/"+t+"/"+o):null==n.result.message?(u.api.getUser(u.apiKey),u.nav.navigateForward("/public/tasks/"+l+"/"+e+"/"+t+"/"+o)):(u.disabled=!1,u.presentToast(n.result.message))}).catch(function(n){u.nav.navigateForward("/public/tasks/"+l+"/"+e+"/"+t+"/"+o)})},n}(),s=function(){return function(){}}(),c=e("pMnS"),g=e("oBZk"),p=e("ZYCi"),f=t["\u0275crt"]({encapsulation:0,styles:[[".offer[_ngcontent-%COMP%]{padding:1rem}.offer[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > ion-textarea[_ngcontent-%COMP%]{border:1px solid #8a8a8a;border-radius:.5rem;padding:.5rem}.offer[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{margin-top:1rem}"]],data:{}});function m(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,11,"ion-header",[],null,null,null,g.X,g.m)),t["\u0275did"](1,49152,null,0,u.A,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](2,0,null,0,9,"ion-toolbar",[],null,null,null,g.vb,g.K)),t["\u0275did"](3,49152,null,0,u.Ab,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](4,0,null,0,2,"ion-title",[],null,null,null,g.ub,g.J)),t["\u0275did"](5,49152,null,0,u.yb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](6,0,["","",""])),(n()(),t["\u0275eld"](7,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,g.Q,g.f)),t["\u0275did"](8,49152,null,0,u.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](9,0,null,0,2,"ion-back-button",[["color","dark"],["text",""]],null,[[null,"click"]],function(n,l,e){var o=!0;return"click"===l&&(o=!1!==t["\u0275nov"](n,11).onClick(e)&&o),o},g.N,g.c)),t["\u0275did"](10,49152,null,0,u.f,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],defaultHref:[1,"defaultHref"],text:[2,"text"]},null),t["\u0275did"](11,16384,null,0,u.g,[[2,u.gb],u.Gb],{defaultHref:[0,"defaultHref"]},null),(n()(),t["\u0275eld"](12,0,null,null,33,"ion-content",[],null,null,null,g.S,g.h)),t["\u0275did"](13,49152,null,0,u.t,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](14,0,null,0,31,"div",[["class","offer"]],null,null,null,null,null)),(n()(),t["\u0275eld"](15,0,null,null,30,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,e){var o=!0;return"submit"===l&&(o=!1!==t["\u0275nov"](n,17).onSubmit(e)&&o),"reset"===l&&(o=!1!==t["\u0275nov"](n,17).onReset()&&o),o},null,null)),t["\u0275did"](16,16384,null,0,i.u,[],null,null),t["\u0275did"](17,540672,null,0,i.f,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,i.a,null,[i.f]),t["\u0275did"](19,16384,null,0,i.m,[[4,i.a]],null,null),(n()(),t["\u0275eld"](20,0,null,null,6,"ion-input",[["formControlName","taskId"]],[[8,"hidden",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0;return"ionBlur"===l&&(o=!1!==t["\u0275nov"](n,21)._handleBlurEvent(e.target)&&o),"ionChange"===l&&(o=!1!==t["\u0275nov"](n,21)._handleInputEvent(e.target)&&o),o},g.cb,g.r)),t["\u0275did"](21,16384,null,0,u.Mb,[t.ElementRef],null,null),t["\u0275prd"](1024,null,i.j,function(n){return[n]},[u.Mb]),t["\u0275did"](23,671744,null,0,i.d,[[3,i.a],[8,null],[8,null],[6,i.j],[2,i.t]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,i.k,null,[i.d]),t["\u0275did"](25,16384,null,0,i.l,[[4,i.k]],null,null),t["\u0275did"](26,49152,null,0,u.F,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{value:[0,"value"]},null),(n()(),t["\u0275eld"](27,0,null,null,6,"ion-input",[["formControlName","categoryId"]],[[8,"hidden",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0;return"ionBlur"===l&&(o=!1!==t["\u0275nov"](n,28)._handleBlurEvent(e.target)&&o),"ionChange"===l&&(o=!1!==t["\u0275nov"](n,28)._handleInputEvent(e.target)&&o),o},g.cb,g.r)),t["\u0275did"](28,16384,null,0,u.Mb,[t.ElementRef],null,null),t["\u0275prd"](1024,null,i.j,function(n){return[n]},[u.Mb]),t["\u0275did"](30,671744,null,0,i.d,[[3,i.a],[8,null],[8,null],[6,i.j],[2,i.t]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,i.k,null,[i.d]),t["\u0275did"](32,16384,null,0,i.l,[[4,i.k]],null,null),t["\u0275did"](33,49152,null,0,u.F,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{value:[0,"value"]},null),(n()(),t["\u0275eld"](34,0,null,null,8,"ion-textarea",[["formControlName","text"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0412\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f"],["required",""],["rows","10"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0;return"ionBlur"===l&&(o=!1!==t["\u0275nov"](n,37)._handleBlurEvent(e.target)&&o),"ionChange"===l&&(o=!1!==t["\u0275nov"](n,37)._handleInputEvent(e.target)&&o),o},g.sb,g.H)),t["\u0275did"](35,16384,null,0,i.p,[],{required:[0,"required"]},null),t["\u0275prd"](1024,null,i.i,function(n){return[n]},[i.p]),t["\u0275did"](37,16384,null,0,u.Mb,[t.ElementRef],null,null),t["\u0275prd"](1024,null,i.j,function(n){return[n]},[u.Mb]),t["\u0275did"](39,671744,null,0,i.d,[[3,i.a],[6,i.i],[8,null],[6,i.j],[2,i.t]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,i.k,null,[i.d]),t["\u0275did"](41,16384,null,0,i.l,[[4,i.k]],null,null),t["\u0275did"](42,49152,null,0,u.wb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{placeholder:[0,"placeholder"],required:[1,"required"],rows:[2,"rows"]},null),(n()(),t["\u0275eld"](43,0,null,null,2,"ion-button",[["color","primary"],["expand","block"]],null,[[null,"click"]],function(n,l,e){var t=!0,o=n.component;return"click"===l&&(t=!1!==o.submit(o.offerForm,o.taskId,o.categoryType,o.categoryCode,o.taskCode)&&t),t},g.P,g.e)),t["\u0275did"](44,49152,null,0,u.j,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"]},null),(n()(),t["\u0275ted"](-1,0,[" \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c "]))],function(n,l){var e=l.component;n(l,10,0,"dark",t["\u0275inlineInterpolate"](4,"/public/tasks/",e.taskId,"/",e.categoryType,"/",e.categoryCode,"/",e.taskCode,""),""),n(l,11,0,t["\u0275inlineInterpolate"](4,"/public/tasks/",e.taskId,"/",e.categoryType,"/",e.categoryCode,"/",e.taskCode,"")),n(l,17,0,e.offerForm),n(l,23,0,"taskId"),n(l,26,0,e.taskId),n(l,30,0,"categoryId"),n(l,33,0,e.iBlockId),n(l,35,0,""),n(l,39,0,"text"),n(l,42,0,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0412\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f","","10"),n(l,44,0,"primary",!e.offerForm.valid||e.disabled,"block")},function(n,l){var e=l.component;n(l,6,0,e.title,e.taskId),n(l,15,0,t["\u0275nov"](l,19).ngClassUntouched,t["\u0275nov"](l,19).ngClassTouched,t["\u0275nov"](l,19).ngClassPristine,t["\u0275nov"](l,19).ngClassDirty,t["\u0275nov"](l,19).ngClassValid,t["\u0275nov"](l,19).ngClassInvalid,t["\u0275nov"](l,19).ngClassPending),n(l,20,0,!0,t["\u0275nov"](l,25).ngClassUntouched,t["\u0275nov"](l,25).ngClassTouched,t["\u0275nov"](l,25).ngClassPristine,t["\u0275nov"](l,25).ngClassDirty,t["\u0275nov"](l,25).ngClassValid,t["\u0275nov"](l,25).ngClassInvalid,t["\u0275nov"](l,25).ngClassPending),n(l,27,0,!0,t["\u0275nov"](l,32).ngClassUntouched,t["\u0275nov"](l,32).ngClassTouched,t["\u0275nov"](l,32).ngClassPristine,t["\u0275nov"](l,32).ngClassDirty,t["\u0275nov"](l,32).ngClassValid,t["\u0275nov"](l,32).ngClassInvalid,t["\u0275nov"](l,32).ngClassPending),n(l,34,0,t["\u0275nov"](l,35).required?"":null,t["\u0275nov"](l,41).ngClassUntouched,t["\u0275nov"](l,41).ngClassTouched,t["\u0275nov"](l,41).ngClassPristine,t["\u0275nov"](l,41).ngClassDirty,t["\u0275nov"](l,41).ngClassValid,t["\u0275nov"](l,41).ngClassInvalid,t["\u0275nov"](l,41).ngClassPending)})}function h(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-create-offer",[],null,null,null,m,f)),t["\u0275did"](1,114688,null,0,d,[p.a,u.Gb,a.a,i.b,u.Nb],null,null)],function(n,l){n(l,1,0)},null)}var v=t["\u0275ccf"]("app-create-offer",d,h,{},{},[]),C=e("Ip0R");e.d(l,"CreateOfferPageModuleNgFactory",function(){return b});var b=t["\u0275cmf"](s,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[c.a,v]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,C.NgLocalization,C.NgLocaleLocalization,[t.LOCALE_ID,[2,C["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,i.s,i.s,[]),t["\u0275mpd"](4608,u.a,u.a,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,u.Fb,u.Fb,[u.a,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](4608,u.Jb,u.Jb,[u.a,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](4608,i.b,i.b,[]),t["\u0275mpd"](1073742336,C.CommonModule,C.CommonModule,[]),t["\u0275mpd"](1073742336,i.r,i.r,[]),t["\u0275mpd"](1073742336,i.g,i.g,[]),t["\u0275mpd"](1073742336,u.Cb,u.Cb,[]),t["\u0275mpd"](1073742336,p.n,p.n,[[2,p.s],[2,p.m]]),t["\u0275mpd"](1073742336,i.o,i.o,[]),t["\u0275mpd"](1073742336,s,s,[]),t["\u0275mpd"](1024,p.k,function(){return[[{path:"",component:d}]]},[])])})}}]);