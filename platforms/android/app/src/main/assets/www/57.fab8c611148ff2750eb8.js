(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{BGIz:function(e,n,l){"use strict";l.r(n);var t=l("CcnG"),o=l("H+bZ"),i=l("t/Na"),u=l("XRfs"),s=function(){function e(e,n){this.api=e,this.socket=n,this.title="\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0438",this.page=1,this.isLoaded=!1,this.isLoadedEnd=!1,this.items=[],this.apiKey=null,this.usersStatuses=null,this.users=[],this.blockedUsers=[]}return e.prototype.ngOnInit=function(){var e=this;this.api.apiKey.subscribe(function(n){return e.apiKey=n}),this.socket.usersStatuses.subscribe(function(n){return e.usersStatuses=n})},e.prototype.ngOnDestroy=function(){},e.prototype.ionViewWillEnter=function(){this.blocked(),this.page=1,this.request()},e.prototype.ionViewWillLeave=function(){this.isLoaded=!1,this.isLoadedEnd=!1,this.items=[],this.users=[],this.socket.removeUsersStatuses()},e.prototype.loadData=function(e){var n=this;this.page=this.page+1,this.request(),setTimeout(function(){e.target.complete(),1e3==n.items.length&&(e.target.disabled=!0)},1e3)},e.prototype.refresh=function(){this.isLoaded=!1,this.isLoadedEnd=!1,this.page=1,this.items=[],this.socket.removeUsersStatuses(),this.request()},e.prototype.doRefresh=function(e){this.isLoaded=!1,this.isLoadedEnd=!1,this.page=1,this.items=[],this.socket.removeUsersStatuses(),this.request(),setTimeout(function(){e.target.complete()},500)},e.prototype.request=function(){var e=this,n={},l=new i.g;null!==this.apiKey&&(l=new i.g({"X-PI-KEY":this.apiKey})),this.page>1&&(n.page=this.page.toString()),this.api._get("users",new i.h({fromObject:n}),l).toPromise().then(function(n){if(e.isLoaded=!0,!n.errorCode){for(var l in n.result)e.items.push(n.result[l]);for(var l in e.items){var t=!1;for(var o in e.users)e.users[o]==e.items[l].c&&(t=!0);t||e.users.push(e.items[l].c)}e.socket.putUsers(e.users)}}).catch(function(n){e.isLoaded=!0,e.isLoadedEnd=!0})},e.prototype.blocked=function(){var e=this;null!==this.apiKey&&this.api._get("blacklist",new i.h,new i.g({"X-PI-KEY":this.apiKey})).toPromise().then(function(n){for(var l in n.result)e.blockedUsers[n.result[l].id]=!0}).catch(function(n){e.isLoaded=!0})},e}(),r=function(){return function(){}}(),a=l("pMnS"),d=l("oBZk"),c=l("ZZ/e"),p=l("TsAn"),f=l("cHem"),h=l("5iWV"),m=l("I+dr"),g=l("Ip0R"),b=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function R(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,3,"ion-infinite-scroll",[["threshold","100px"]],null,[[null,"ionInfinite"]],function(e,n,l){var t=!0;return"ionInfinite"===n&&(t=!1!==e.component.loadData(l)&&t),t},d.bb,d.p)),t["\u0275did"](1,49152,null,0,c.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{threshold:[0,"threshold"]},null),(e()(),t["\u0275eld"](2,0,null,0,1,"ion-infinite-scroll-content",[["loadingSpinner","crescent"]],null,null,null,d.ab,d.q)),t["\u0275did"](3,49152,null,0,c.E,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{loadingSpinner:[0,"loadingSpinner"]},null)],function(e,n){e(n,1,0,"100px"),e(n,3,0,"crescent")},null)}function k(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,17,"ion-header",[],null,null,null,d.X,d.m)),t["\u0275did"](1,49152,null,0,c.A,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(e()(),t["\u0275eld"](2,0,null,0,15,"ion-toolbar",[],null,null,null,d.vb,d.K)),t["\u0275did"](3,49152,null,0,c.Ab,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(e()(),t["\u0275eld"](4,0,null,0,2,"ion-title",[],null,null,null,d.ub,d.J)),t["\u0275did"](5,49152,null,0,c.yb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(e()(),t["\u0275ted"](6,0,["",""])),(e()(),t["\u0275eld"](7,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,d.Q,d.f)),t["\u0275did"](8,49152,null,0,c.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(e()(),t["\u0275eld"](9,0,null,0,2,"ion-back-button",[["color","dark"],["defaultHref","/public/home"],["text",""]],null,[[null,"click"]],function(e,n,l){var o=!0;return"click"===n&&(o=!1!==t["\u0275nov"](e,11).onClick(l)&&o),o},d.N,d.c)),t["\u0275did"](10,49152,null,0,c.f,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],defaultHref:[1,"defaultHref"],text:[2,"text"]},null),t["\u0275did"](11,16384,null,0,c.g,[[2,c.gb],c.Gb],{defaultHref:[0,"defaultHref"]},null),(e()(),t["\u0275eld"](12,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,d.Q,d.f)),t["\u0275did"](13,49152,null,0,c.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(e()(),t["\u0275eld"](14,0,null,0,3,"ion-button",[],null,[[null,"click"]],function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.refresh()&&t),t},d.P,d.e)),t["\u0275did"](15,49152,null,0,c.j,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(e()(),t["\u0275eld"](16,0,null,0,1,"ion-icon",[["name","refresh"]],null,null,null,d.Y,d.n)),t["\u0275did"](17,49152,null,0,c.B,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(e()(),t["\u0275eld"](18,0,null,null,1,"app-users-items-list-skeleton",[],null,null,null,p.b,p.a)),t["\u0275did"](19,114688,null,0,f.a,[],{isLoaded:[0,"isLoaded"]},null),(e()(),t["\u0275eld"](20,0,null,null,7,"ion-content",[],null,null,null,d.S,d.h)),t["\u0275did"](21,49152,null,0,c.t,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(e()(),t["\u0275eld"](22,0,null,0,3,"ion-list",[["inset","true"]],null,null,null,d.hb,d.w)),t["\u0275did"](23,49152,null,0,c.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{inset:[0,"inset"]},null),(e()(),t["\u0275eld"](24,0,null,0,1,"app-users-items-list",[],null,null,null,h.b,h.a)),t["\u0275did"](25,114688,null,0,m.a,[c.Gb,o.a],{items:[0,"items"],statuses:[1,"statuses"],blockedUsers:[2,"blockedUsers"]},null),(e()(),t["\u0275and"](16777216,null,0,1,null,R)),t["\u0275did"](27,16384,null,0,g.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var l=n.component;e(n,10,0,"dark","/public/home",""),e(n,11,0,"/public/home"),e(n,17,0,"refresh"),e(n,19,0,l.isLoaded),e(n,23,0,"true"),e(n,25,0,l.items,l.usersStatuses,l.blockedUsers),e(n,27,0,!l.isLoadedEnd)},function(e,n){e(n,6,0,n.component.title)})}function v(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"app-users",[],null,null,null,k,b)),t["\u0275did"](1,245760,null,0,s,[o.a,u.a],null,null)],function(e,n){e(n,1,0)},null)}var C=t["\u0275ccf"]("app-users",s,v,{},{},[]),y=l("gIcY"),E=l("ZYCi"),L=l("BJHQ"),N=l("XdnL");l.d(n,"UsersPageModuleNgFactory",function(){return Z});var Z=t["\u0275cmf"](r,[],function(e){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[a.a,C]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,g.NgLocalization,g.NgLocaleLocalization,[t.LOCALE_ID,[2,g["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,y.s,y.s,[]),t["\u0275mpd"](4608,c.a,c.a,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,c.Fb,c.Fb,[c.a,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](4608,c.Jb,c.Jb,[c.a,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](1073742336,g.CommonModule,g.CommonModule,[]),t["\u0275mpd"](1073742336,y.r,y.r,[]),t["\u0275mpd"](1073742336,y.g,y.g,[]),t["\u0275mpd"](1073742336,c.Cb,c.Cb,[]),t["\u0275mpd"](1073742336,E.n,E.n,[[2,E.s],[2,E.m]]),t["\u0275mpd"](1073742336,L.a,L.a,[]),t["\u0275mpd"](1073742336,N.a,N.a,[]),t["\u0275mpd"](1073742336,r,r,[]),t["\u0275mpd"](1024,E.k,function(){return[[{path:"",component:s}]]},[])])})}}]);