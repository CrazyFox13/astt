(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"K+p/":function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),u=e("H+bZ"),o=e("XRfs"),i=e("ZZ/e"),s=e("t/Na"),a=function(){function n(n,l,e,t){this.api=n,this.socket=l,this.nav=e,this.route=t,this.title="\u0427\u0430\u0442 \u043f\u043e \u0437\u0430\u0434\u0430\u043d\u0438\u044e #",this.isLoaded=!1,this.items=[],this.user=null,this.apiKey=null,this.roomId=null,this.taskId=0,this.initRoom=null}return n.prototype.ngOnInit=function(){var n=this;this.api.apiKey.subscribe(function(l){return n.apiKey=l}),this.api.user.subscribe(function(l){return n.user=l}),this.socket.roomId.subscribe(function(l){return n.roomId=l})},n.prototype.ngOnDestroy=function(){null!==this.initRoom&&this.socket.getInstance().removeListener(this.initRoom+" new message",function(n){})},n.prototype.ionViewWillEnter=function(){this.taskId=parseInt(this.route.snapshot.paramMap.get("taskId")),this.initRoom=this.route.snapshot.paramMap.get("roomId"),this.socket.unSetRoomId(),this.request()},n.prototype.ionViewWillLeave=function(){this.items=[],this.socket.unSetRoomId(),null!==this.initRoom&&this.socket.getInstance().removeListener(this.initRoom+" new message",function(n){})},n.prototype.request=function(){var n=this;this.socket.setRoomId(this.initRoom,this.taskId),this.api._get("chatid",(new s.h).set("taskId",this.taskId.toString()).set("id",this.initRoom),new s.g({"X-PI-KEY":this.apiKey})).toPromise().then(function(l){for(var e in n.isLoaded=!0,n.socket.removeUnread(n.initRoom),l.result)n.items.push(l.result[e]);n.socket.getInstance().on(n.initRoom+" new message",function(l){l.roomId==n.initRoom&&n.items.push(l)})}).catch(function(l){n.socket.unSetRoomId()})},n}(),r=function(){return function(){}}(),d=e("pMnS"),c=e("oBZk"),f=e("Ip0R"),m=function(){function n(){this.isLoaded=!1}return n.prototype.ngOnInit=function(){},n}(),g=t["\u0275crt"]({encapsulation:0,styles:[[".skeleton[_ngcontent-%COMP%]{width:100%;display:inline-block}.skeleton-left[_ngcontent-%COMP%], .skeleton-right[_ngcontent-%COMP%]{height:3rem;border-radius:.3rem}.skeleton-right[_ngcontent-%COMP%]{width:54%;float:right}.skeleton-left[_ngcontent-%COMP%]{width:63%}"]],data:{}});function p(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","skeleton"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"ion-skeleton-text",[["animated",""],["class","skeleton-left"]],null,null,null,c.ob,c.D)),t["\u0275did"](2,49152,null,0,i.nb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{animated:[0,"animated"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"ion-skeleton-text",[["animated",""],["class","skeleton-right"]],null,null,null,c.ob,c.D)),t["\u0275did"](4,49152,null,0,i.nb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{animated:[0,"animated"]},null)],function(n,l){n(l,2,0,""),n(l,4,0,"")},null)}function h(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,4,"ion-list",[["class","ion-padding"]],null,null,null,c.hb,c.w)),t["\u0275did"](2,49152,null,0,i.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275and"](16777216,null,0,2,null,p)),t["\u0275did"](4,278528,null,0,f.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pad"](5,5)],function(n,l){var e=n(l,5,0,1,2,3,4,5);n(l,4,0,e)},null)}function R(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,h)),t["\u0275did"](1,16384,null,0,f.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,1,0,!l.component.isLoaded)},null)}var v=e("ZYCi"),k=t["\u0275crt"]({encapsulation:0,styles:[[".message-area[_ngcontent-%COMP%]{width:100%;margin-bottom:.7rem;display:inline-block}.message-left[_ngcontent-%COMP%], .message-right[_ngcontent-%COMP%]{padding:.5rem;border-radius:.3rem;position:relative;display:inline-block}.message-left[_ngcontent-%COMP%]{background-color:#f5f5f5}.message-right[_ngcontent-%COMP%]{background-color:#3880ff;color:#fff;float:right}.message-date[_ngcontent-%COMP%]{font-size:.7rem}.message-text[_ngcontent-%COMP%]{font-size:.9rem;margin-top:.3rem}.message-status[_ngcontent-%COMP%]{position:absolute;right:.5rem;font-size:.7rem}"]],data:{}});function C(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","message-area"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,4,"div",[["class","message-left"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,1,"div",[["class","message-date"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,["",""])),(n()(),t["\u0275eld"](4,0,null,null,1,"div",[["class","message-text"]],null,null,null,null,null)),(n()(),t["\u0275ted"](5,null,["",""]))],null,function(n,l){n(l,3,0,l.parent.context.$implicit.date),n(l,5,0,l.parent.context.$implicit.message)})}function I(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"ion-icon",[["color","light"],["name","checkmark"]],null,null,null,c.Y,c.n)),t["\u0275did"](1,49152,null,0,i.B,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],name:[1,"name"]},null)],function(n,l){n(l,1,0,"light","checkmark")},null)}function b(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"ion-icon",[["color","success"],["name","done-all"]],null,null,null,c.Y,c.n)),t["\u0275did"](1,49152,null,0,i.B,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],name:[1,"name"]},null)],function(n,l){n(l,1,0,"success","done-all")},null)}function N(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,10,"div",[["class","message-area"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,9,"div",[["class","message-right"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,4,"div",[["class","message-status"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](4,16384,null,0,f.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](6,16384,null,0,f.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](7,0,null,null,1,"div",[["class","message-date"]],null,null,null,null,null)),(n()(),t["\u0275ted"](8,null,["",""])),(n()(),t["\u0275eld"](9,0,null,null,1,"div",[["class","message-text"]],null,null,null,null,null)),(n()(),t["\u0275ted"](10,null,["",""]))],function(n,l){n(l,4,0,!l.parent.context.$implicit.status),n(l,6,0,l.parent.context.$implicit.status)},function(n,l){n(l,8,0,l.parent.context.$implicit.date),n(l,10,0,l.parent.context.$implicit.message)})}function w(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","message"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,C)),t["\u0275did"](2,16384,null,0,f.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,N)),t["\u0275did"](4,16384,null,0,f.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,l.context.$implicit.from!==e.user.c),n(l,4,0,l.context.$implicit.from==e.user.c)},null)}function y(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,11,"ion-header",[],null,null,null,c.X,c.m)),t["\u0275did"](1,49152,null,0,i.A,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](2,0,null,0,9,"ion-toolbar",[],null,null,null,c.vb,c.K)),t["\u0275did"](3,49152,null,0,i.Ab,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](4,0,null,0,2,"ion-title",[],null,null,null,c.ub,c.J)),t["\u0275did"](5,49152,null,0,i.yb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](6,0,["","",""])),(n()(),t["\u0275eld"](7,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,c.Q,c.f)),t["\u0275did"](8,49152,null,0,i.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](9,0,null,0,2,"ion-back-button",[["color","dark"],["defaultHref","/private/messages"],["text",""]],null,[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==t["\u0275nov"](n,11).onClick(e)&&u),u},c.N,c.c)),t["\u0275did"](10,49152,null,0,i.f,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],defaultHref:[1,"defaultHref"],text:[2,"text"]},null),t["\u0275did"](11,16384,null,0,i.g,[[2,i.gb],i.Gb],{defaultHref:[0,"defaultHref"]},null),(n()(),t["\u0275eld"](12,0,null,null,1,"app-messages-list-skeleton",[],null,null,null,R,g)),t["\u0275did"](13,114688,null,0,m,[],{isLoaded:[0,"isLoaded"]},null),(n()(),t["\u0275eld"](14,0,null,null,5,"ion-content",[],null,null,null,c.S,c.h)),t["\u0275did"](15,49152,null,0,i.t,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](16,0,null,0,3,"ion-list",[["inset","true"]],null,null,null,c.hb,c.w)),t["\u0275did"](17,49152,null,0,i.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{inset:[0,"inset"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,w)),t["\u0275did"](19,278528,null,0,f.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var e=l.component;n(l,10,0,"dark","/private/messages",""),n(l,11,0,"/private/messages"),n(l,13,0,e.isLoaded),n(l,17,0,"true"),n(l,19,0,e.items)},function(n,l){var e=l.component;n(l,6,0,e.title,e.taskId)})}function O(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-detail",[],null,null,null,y,k)),t["\u0275did"](1,245760,null,0,a,[u.a,o.a,i.Gb,v.a],null,null)],function(n,l){n(l,1,0)},null)}var M=t["\u0275ccf"]("app-detail",a,O,{},{},[]),D=e("gIcY"),_=e("XdnL");e.d(l,"DetailPageModuleNgFactory",function(){return Z});var Z=t["\u0275cmf"](r,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[d.a,M]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,f.NgLocalization,f.NgLocaleLocalization,[t.LOCALE_ID,[2,f["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,D.s,D.s,[]),t["\u0275mpd"](4608,i.a,i.a,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,i.Fb,i.Fb,[i.a,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](4608,i.Jb,i.Jb,[i.a,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](1073742336,f.CommonModule,f.CommonModule,[]),t["\u0275mpd"](1073742336,D.r,D.r,[]),t["\u0275mpd"](1073742336,D.g,D.g,[]),t["\u0275mpd"](1073742336,i.Cb,i.Cb,[]),t["\u0275mpd"](1073742336,v.n,v.n,[[2,v.s],[2,v.m]]),t["\u0275mpd"](1073742336,_.a,_.a,[]),t["\u0275mpd"](1073742336,r,r,[]),t["\u0275mpd"](1024,v.k,function(){return[[{path:"",component:a}]]},[])])})},XdnL:function(n,l,e){"use strict";e.d(l,"a",function(){return t});var t=function(){return function(){}}()}}]);